/* ====== Root & Theme ====== */
:root{
  --bg: #0f1222;
  --panel: #151835;
  --panel-2: #1b1f44;
  --text: #e8ebff;
  --muted: #b6b9d6;
  --accent: #8a9cff;
  --shadow: 0 10px 30px rgba(0,0,0,.35);

  --red: #ff4d6d;
  --green:#22c55e;
  --yellow:#f59e0b;
  --blue:#3b82f6;

  --cell:#1f234d;
  --safe:#24306c;
  --home:#11162f;

  --glow: 0 0 0px rgba(255,255,255,0), 0 0 0px rgba(255,255,255,0);
}

html,body{height:100%}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 20% -10%, #1f2350 0%, transparent 60%),
    radial-gradient(1000px 700px at 100% 10%, #1a1e3f 0%, transparent 60%),
    linear-gradient(160deg, #0a0d1c, #0f1222 50%, #0a0d1c 100%);
}

/* Theme modifiers */
body.theme-classic{ --bg:#f2efe6; --panel:#fff; --panel-2:#faf8f5; --text:#13141a; --muted:#4b4e5b; --cell:#ece8dd; --safe:#dcd6c4; --home:#cfc9b9; }
body.theme-wood{ --bg:#2a1b0f; --panel:#3a2415; --panel-2:#2f1d11; --text:#fdf7ec; --muted:#e0cfb7; --cell:#5c3a20; --safe:#714824; --home:#2b1a0f;}
body.theme-dark{ --bg:#0a0a0a; --panel:#121212; --panel-2:#171717; --text:#e8e8e8; --muted:#b5b5b5; --cell:#1a1a1a; --safe:#222; --home:#101010;}

.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px; position:sticky; top:0; z-index:5;
  background:linear-gradient(180deg, rgba(0,0,0,.28), rgba(0,0,0,0));
  backdrop-filter:saturate(1.3) blur(12px);
}
.brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.5px}
.logo-dot{width:10px;height:10px;border-radius:50%;background:var(--accent); box-shadow:0 0 12px var(--accent)}
.logo-text{font-size:18px}

.controls{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.control{display:flex; align-items:center; gap:8px; padding:6px 10px; background:var(--panel); border-radius:12px; box-shadow: var(--shadow)}
.control select{background:transparent; color:var(--text); border:none; outline:none; font-weight:600}
.btn{border:none; padding:10px 14px; border-radius:12px; background:linear-gradient(135deg, var(--panel), var(--panel-2)); color:var(--text); font-weight:700; cursor:pointer; box-shadow: var(--shadow); transition: transform .08s ease}
.btn:active{transform:scale(0.98)}
.btn-lite{opacity:.9}
.icon-btn{border:none; background:var(--panel); color:var(--text); padding:10px 12px; border-radius:12px; box-shadow:var(--shadow); cursor:pointer}

.scoreboard{
  display:grid; grid-template-columns: repeat(5, minmax(180px,1fr));
  gap:12px; padding:10px 18px;
}
.score{background:var(--panel); border-radius:16px; padding:12px; box-shadow: var(--shadow)}
.team-head{display:flex; align-items:center; gap:8px; font-weight:800; padding-bottom:6px; border-bottom:1px solid rgba(255,255,255,.06)}
.dot{width:10px;height:10px;border-radius:50%}
.dot-r{background:var(--red); box-shadow:0 0 10px var(--red)}
.dot-g{background:var(--green); box-shadow:0 0 10px var(--green)}
.dot-y{background:var(--yellow); box-shadow:0 0 10px var(--yellow)}
.dot-b{background:var(--blue); box-shadow:0 0 10px var(--blue)}
.score .row{display:flex; align-items:center; justify-content:space-between; padding:8px 0; font-size:18px}
.score .mini{font-size:12px; color:var(--muted)}

.board-wrap{
  max-width:1200px; margin: 10px auto; padding:0 16px;
  display:grid; grid-template-columns: 1fr 280px; align-items:start; gap:16px;
}
.board{
  width:100%; aspect-ratio:1/1; background:var(--panel);
  border-radius:20px; box-shadow: var(--shadow); display:grid; grid-template-columns: 15 repeat(13, 1fr) 15;
  grid-template-rows: 15 repeat(13, 1fr) 15; position:relative; overflow:hidden;
}
.board::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:
    radial-gradient(600px 400px at 20% 20%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(500px 300px at 80% 80%, rgba(255,255,255,.04), transparent 60%);
}

/* Cells (generated by JS) */
.cell{
  border:1px solid rgba(255,255,255,.04);
  background:var(--cell);
  position:relative;
}
.cell.safe{ background:var(--safe); }
.cell.home{ background:var(--home); }

/* Pawn tokens */
.pawn{
  width:72%; aspect-ratio:1/1; border-radius:50%;
  margin:auto; position:absolute; inset:0; transform:translate(0,0);
  transition: transform .28s cubic-bezier(.22,.61,.36,1), box-shadow .2s ease;
  box-shadow: 0 4px 10px rgba(0,0,0,.35), var(--glow);
}
.pawn.red{background: linear-gradient(145deg, #ff6b81, #ff3b5c);}
.pawn.green{background: linear-gradient(145deg, #34d399, #16a34a);}
.pawn.yellow{background: linear-gradient(145deg, #facc15, #f59e0b);}
.pawn.blue{background: linear-gradient(145deg, #60a5fa, #3b82f6);}

/* Glow on active pawn */
.pawn.active{
  --glow: 0 0 18px rgba(255,255,255,.25), 0 0 40px rgba(255,255,255,.14);
}

/* Dice */
.dice-area{background:var(--panel); border-radius:20px; box-shadow:var(--shadow); padding:16px; display:flex; flex-direction:column; gap:12px; position:sticky; top:78px}
.turn-indicator{display:flex; gap:8px; align-items:center; font-size:18px}
.dice-wrap{ perspective: 800px; display:grid; place-items:center; height:180px; }
.dice{
  width:120px;height:120px; position:relative; transform-style: preserve-3d;
  transform: rotateX(30deg) rotateY(30deg); transition: transform .9s cubic-bezier(.19,1,.22,1);
}
.dice .face{
  position:absolute; inset:0; display:grid; place-items:center; font-weight:900; font-size:26px;
  background:linear-gradient(145deg, #2a2e64, #1b1f45); border-radius:16px; border:1px solid rgba(255,255,255,.06);
  box-shadow: 0 10px 30px rgba(0,0,0,.5) inset;
}
.f1{ transform: translateZ(60px); }
.f2{ transform: rotateY(90deg) translateZ(60px); }
.f3{ transform: rotateY(180deg) translateZ(60px); }
.f4{ transform: rotateY(-90deg) translateZ(60px); }
.f5{ transform: rotateX(90deg) translateZ(60px); }
.f6{ transform: rotateX(-90deg) translateZ(60px); }

.btn.big{font-size:18px; padding:14px 16px}
.hint{font-size:12px; color:var(--muted); text-align:center}

/* Footer */
.footer{
  max-width:1200px; margin:16px auto; padding:8px 16px; display:flex; align-items:center; justify-content:space-between; color:var(--muted)
}
.pill{background:var(--panel); padding:6px 10px; border-radius:12px}

/* Login Gate */
.gate{
  position:fixed; inset:0; display:none; place-items:center; background:linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,.35)); backdrop-filter: blur(6px);
}
.gate.show{display:grid}
.gate-card{
  width:min(460px, 92vw); background:var(--panel); border-radius:20px; box-shadow:var(--shadow);
  padding:20px; text-align:center;
}
.gate-title{margin:6px 0 4px}
.gate-sub{margin:0 0 14px; color:var(--muted)}
.gate-row{display:flex; gap:8px; }
.gate-row input{
  flex:1; padding:12px 14px; background:var(--panel-2); border:1px solid rgba(255,255,255,.08); border-radius:12px; color:var(--text); font-weight:700; letter-spacing:2px; text-align:center;
}
.gate-err{margin-top:8px; min-height:20px; color:#ff6b81; font-weight:700}

/* Responsive */
@media (max-width: 980px){
  .board-wrap{ grid-template-columns: 1fr; }
  .dice-area{ position:relative; top:unset }
  .scoreboard{ grid-template-columns: repeat(2, minmax(180px,1fr)); }
}
